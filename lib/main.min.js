"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}window.onload=function(){function e(e,n){var o=t("faq"),a=.12,s=0;for(var i in o.dataset)s=parseFloat(i);var c=o.dataset[s].split(":")[1].slice(0,-1),l=n?s+parseFloat(e):s;o.dataset[l]?o.removeAttribute("data-".concat(l)):o.dataset[l]="top: "+(c-e*a)+"%",r&&skrollr.get().refresh()}var t=function(e){return document.querySelector(".".concat(e))},n=window.innerWidth,r=n>=1140,o=document.querySelectorAll(".form__modal input, .form__modal textarea"),a=t("faq"),s=0;for(var i in a.dataset)s=parseFloat(i);var c=function(){var e=t("faq");for(var n in e.dataset)n>s&&e.removeAttribute("data-".concat(n));r&&skrollr.get().refresh()},l=function(t){function n(){[].forEach.call(u.querySelectorAll("button"),function(e){e.classList.add(m),e.nextElementSibling.classList.add(v)}),u.addEventListener("click",r),o(),f&&i(f)}function r(e){-1!==e.target.className.indexOf(m)&&(d&&o(),a(e.target,e.target.nextElementSibling))}function o(){[].forEach.call(u.querySelectorAll("."+v),function(e){e.style.height=0})}function a(t,n){var r,o=n.scrollHeight;"0px"===n.style.height||""===n.style.height?(n.style.height=o+20+"px",r=!0,t.classList.add("active")):(n.style.height=0,r=!1,t.classList.remove("active")),e(o,r)}function s(e){return u.querySelectorAll("."+v)[e-1]}function i(e){var t=s(e);t&&(d&&o(),t.style.height=t.scrollHeight+"px")}function c(e){var t=s(e);t&&(t.style.height=0)}function l(){u.removeEventListener("click",r)}var u="string"==typeof t.element?document.getElementById(t.element):t.element,f=t.openTab,d=t.oneOpen||!1,m="js-Accordion-title",v="js-Accordion-content";return n(),{open:i,close:c,destroy:l}};new l({element:"accordion",oneOpen:!1});r&&skrollr.init({forceHeight:!0});var u={portfolioManager:{title:"директор и руководитель портфеля",problems:["Качество данных о проектах не позволяет анализировать и принимать решения","Отчеты не дают полной картины и готовятся с опозданием","Протокольные поручения долго доходят до исполнителей, отсутствует обратная связь","Поэтому проблемы решаются по факту их возникновения, приходиться управлять проектами вручную"],solutions:["Достоверная информация о реализации проектов, программ и портфелей в едином окне","Проверка качества данных по 24 критериям","Оценка не только по бюджетам и срокам, но и по контрольным точкам, которые наглядно отображают ход реализации проекта","Контроль отклонений в показателях деятельности с помощью системы e-mail-поручений","Наглядные и подробные отчеты","Рейтинг сотрудников"]},projectOffice:{title:"руководитель и планировщик программ, проектный офис",problems:["Не хватает нужной информации для принятия решений","Возникают параллельные запросы по причине отсутствия системы сбора данных по проектам","Решения на совещаниях принимаются не на основе фактов, а на основе чутья","Сложно обеспечить личное присутствие на каждом объекте и повлиять на работников контрагентов","В итоге приходится решать проблемы по факту на площадке и принимать экспертные решения, не обладая нужными компетенциями. А система управления работает неэффективно"],solutions:["Инструмент подбора команд проектов с учетом их опыта и результативности","Управление текущей ситуацией через обратную связь в проектах","Анализ динамики показателей деятельности ","Агрегация больших данных развития методологии и управления знаниями ","Шаблоны, сценарии планирования Управление мотивацией и качеством данных "]},projectEngineer:{title:"руководитель, планировщик и инженер проекта",problems:["Возможны ошибки связи задач в графике и данных, отсутствие внимания к бюджету","Планировщик может сделать график в логике, которая понятна только ему","Сложные правила планирования мотивируют не исполнят их","Исполнители могут быть не в курсе общего плана, но не говорить об этом","В итоге графики не перепланируются автоматически, неполные и разношерстные данные препятствуют адекватному формированию программы и бюджета. Часть работ и поручений не выполняется вовремя, а проблемы замалчиваются."],solutions:["Уменьшение трудозатрат на планирование и всегда актуальный график","Акцентирование внимания не на рутине, а на управлении и моделировании ситуации по проектам, балансировке ресурсов на проект, расширенному контролю данных, быстрой коммуникации с подрядчиками ","Единообразные графики, позволяющие реализовывать проект на одном языке"]}},f=function(e,n){var r=t("functions__".concat(n,"__list"));r.innerHTML="";var o=document.createElement("div");o.classList.add("functions__".concat(n,"__list__common"));var a=u[e][n].length-1,s=function(e){r.appendChild(o),r.innerHTML+="<p>".concat(e,"</p>")};u[e][n].forEach(function(e,t){return t<a?o.innerHTML+="<p>".concat(e,"</p>"):s(e)})},d=t("functions__choose");d.addEventListener("click",function(e){var t=d.getElementsByTagName("p"),n=t[0],r=e.target.dataset.role,o=document.querySelector("[data-role=".concat(r,"]"));if(r&&r!==n.dataset.role){var a=_toConsumableArray(t).indexOf(n),s=_toConsumableArray(t).indexOf(o),i=n.innerHTML,c=n.dataset.role;t[a].innerHTML=o.innerHTML,t[a].dataset.role=o.dataset.role,t[s].innerHTML=i,t[s].dataset.role=c,f(r,"problems"),f(r,"solutions")}});var m={possibilities:{title:"возможности",qa:[{question:"Чем проектный ассистент может помочь моей компании?",answer:"testAnswer"},{question:"В чем преимущества системы?",answer:"Проектный ассистент расширяет функционал MS Project и дополняет стандартную методологию управления проектами. Система встраивается в деятельность компании и ее ИТ-архитектуру, объединяет ключевых партнеров. Продукт постоянно развивается, пользователи получают техническую и методическую поддержку."},{question:"Как система поможет обычному проектировщику?",answer:"testAnswer3"},{question:"Какая схема работы?",answer:"testAnswer4"}]},interface:{title:"Интерфейс",qa:[{question:"testQuestion11",answer:"testAnswer11"},{question:"testQuestion21",answer:"testAnswer21"},{question:"testQuestion31",answer:"testAnswer31"},{question:"testQuestion41",answer:"testAnswer41"},{question:"testQuestion51",answer:"testAnswer51"}]},introduction:{title:"Внедрение",qa:[{question:"testQuestion111",answer:"testAnswer111"},{question:"testQuestion211",answer:"testAnswer211"},{question:"testQuestion311",answer:"testAnswer311"},{question:"testQuestion411",answer:"testAnswer411"},{question:"testQuestion511",answer:"testAnswer511"},{question:"testQuestion611",answer:"testAnswer611"}]},about:{title:"О проекте",qa:[{question:"testQuestion1111",answer:"testAnswer1112"},{question:"testQuestion2111",answer:"testAnswer21123"},{question:"testQuestion3111",answer:"testAnswer31123"},{question:"testQuestion4111",answer:"testAnswer41123"},{question:"testQuestion5111",answer:"testAnswer51123"}]}},v={FULL:"full",SHORT:"short"},p=function(n){var r=t("faq__show-more"),o=m[n].qa.length;o>5?r.classList.add("visible"):r.classList.remove("visible"),r.addEventListener("click",function(){var t=86;_(n,v.FULL),r.classList.remove("visible"),o>5&&e((o-5)*t,!0)})},y=t("faq__header__tabs");y.addEventListener("click",function(e){c();var n=t("tab--chosen"),r=e.target.dataset.category;if(r&&r!==n.dataset.category){n.classList.remove("tab--chosen");var o=document.querySelector("[data-category=".concat(r,"]"));o.classList.add("tab--chosen"),p(r),_(r,v.SHORT)}});var _=function(e,n){var r=t("js-Accordion"),o=n===v.SHORT?m[e].qa.slice(0,5):m[e].qa;r.innerHTML="",o.forEach(function(e){return r.innerHTML+='\n        <button class="js-Accordion-title">'.concat(e.question,'\n          <img src="./wp-content/themes/new-pm/img/faq/arrow-down.png" alt="arrow-down">\n        </button>\n        <div class="js-Accordion-content">').concat(e.answer,"</div>\n        ")})},b=t("tab--chosen").dataset.category;p(b),_(b,v.SHORT);var h=t("menu__icon"),w=t("menu__close"),g=function(){var e=t("menu");e.classList.toggle("menu--open")};h.addEventListener("click",g),w.addEventListener("click",g);var A=t("functions__solutions__text--more > button");A.addEventListener("click",function(){E(S.faq)});var L=[{querySelector:"order",text:"Нам нужна демонстрация."},{querySelector:"how__arrow-block__analyse__content > button",text:"Мы готовы к переговорам о сотрудничестве."},{querySelector:"scheme__start__presentation > button",text:"Нам нужна презентация возможностей Проектного Ассистента."},{querySelector:"form__btn",text:""}];L.forEach(function(e){var n=e.querySelector,r=e.text,o=t(n),a=t("form__message");o.addEventListener("click",function(){a.value=r,x("open")})});var q=document.querySelectorAll(".how, .result, .functions, .pros, .scheme, .faq, .form__wrap"),S=r?{how:990,result:1870,functions:2765,pros:3600,scheme:5200,faq:7230,form__wrap:7600}:_toConsumableArray(q).reduce(function(e,t){return _objectSpread(_objectSpread({},e),{},_defineProperty({},t.classList[0],Math.ceil(window.pageYOffset+t.getBoundingClientRect().top)))},{}),E=function(e,t){window.scrollTo({top:e,behavior:t||"smooth"})},O=document.querySelector(".menu__sections");O.addEventListener("click",function(e){var t=e.target.dataset.section;t&&(E(S[t]),g())}),window.onscroll=function(){var e=t("phone-big"),n=t("offer__header"),r=t("form__title"),o=window.pageYOffset<n.clientHeight,a=r.getBoundingClientRect().top<window.innerHeight;o||a?e.classList.remove("visible"):e.classList.add("visible")};var j=function(){var e=t("success-screen"),n=t("error"),r=document.querySelector(".form__modal button"),a=t("checkbox");[].concat(_toConsumableArray(o),[r,a]).forEach(function(e){return e.classList.remove("success")}),o.forEach(function(e){return e.value=""}),e.classList.remove("active"),n.classList.remove("active")},k=t("form__modal__overlay"),T=t("form__modal"),H=document.querySelectorAll(".form__modal__close"),x=function(e){var n=t("how"),o=t("result"),a=t("scheme");"open"===e?(k.classList.add("active"),T.classList.add("active")):(k.classList.remove("active"),T.classList.remove("active")),r&&(document.body.classList.contains("no-scroll")?(n.style.left=parseFloat(n.style.left)+.7+"%",o.style.left=parseFloat(o.style.left)+1.5+"%",a.style.left=parseFloat(a.style.left)+.6+"%"):(n.style.left=parseFloat(n.style.left)-.7+"%",o.style.left=parseFloat(o.style.left)-1.5+"%",a.style.left=parseFloat(a.style.left)-.6+"%")),document.body.classList.toggle("no-scroll")};[].concat(_toConsumableArray(H),[k]).forEach(function(e){return e.addEventListener("click",function(){x("close"),j()})});var Q=["+","7","(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,"-",/\d/,/\d/],P=t("form__phone"),F=(vanillaTextMask.maskInput({inputElement:P,mask:Q}),t("form__submit__btn")),M=document.querySelectorAll(".form__modal > input"),C={name:!1,tel:!1,email:!1},I=function(){3===Object.values(C).filter(Boolean).length?F.removeAttribute("disabled"):F.setAttribute("disabled",!0)},B=function(e){var t="tel"===e.name,n=t?e.value.replace(/[_]/gi,""):null;return!(!t||17!==n.length)||!(t||!e.value)};M.forEach(function(e){e.addEventListener("input",function(t){C[e.name]=B(t.target),I()})}),F.addEventListener("click",function(e){var t=_toConsumableArray(o).reduce(function(e,t){return _objectSpread(_objectSpread({},e),{},_defineProperty({},t.name,"checkbox"===t.type?!0===t.checked?"Да":"Нет":t.value))},{}),n=new FormData;for(var r in t)n.append(r,t[r]);n.append("sendto","Office@pm-assistant.ru"),fetch("./wp-content/themes/new-pm/scripts/mail.php",{method:"POST",body:n}).then(function(e){return 400===e.status?R():D()}).catch(function(e){return console.error(e)})});var R=function(){var e=t("error");e.classList.add("active")},D=function(){var e=t("checkbox"),n=document.querySelector(".form__modal button");[].concat(_toConsumableArray(o),[e,n]).forEach(function(e){return e.classList.add("success")});var r=t("success-screen");r.classList.add("active");var a=t("error");a.classList.remove("active"),setTimeout(function(){x("close"),j()},3e3)},W=[t("offer")].concat(_toConsumableArray(q));if(r&&n<1920){var K=1140,N=1920,U=N-K,$=20,Y=$*((n-K)/U),z=Y-$;W.forEach(function(e){var t=e.clientWidth/K,n=[].filter.call(e.attributes,function(e){return/^data-/.test(e.name)}).map(function(e){return{name:e.name.split("-")[1],value:e.value}});n.forEach(function(n){var r=function(t,r){return e.classList.contains(t)&&Number(n.name)===r};if(n.value.includes("left: ")){var o=n.value.split("left: "),a=parseFloat(o[1]),s=a+z*t;if(r("how",300)||r("result",1100)||r("functions",2e3))return void(e.dataset[n.name]="".concat(o[0]," left: 100%"));var i="".concat(o[0]," left: ").concat(a>100&&s<100?100:s,"%");e.dataset[n.name]=i}})}),skrollr.get().refresh()}var G=1e3,J=window.innerHeight,V=1080;if(J>G){var X=[{section:"how",ratio:5},{section:"result",ratio:9},{section:"functions",ratio:14},{section:"pros",ratio:2},{section:"faq",ratio:6}];X.forEach(function(e){var n=t(e.section),r=[].filter.call(n.attributes,function(e){return/^data-/.test(e.name)}).map(function(e){return{name:e.name.split("-")[1],value:e.value}});r.forEach(function(t){if(t.value.includes("top:")){var r=t.value.replace(/(top:|\;| )|(\d+\.\d+\%)|(left: \d+\.\d+\%)/g,"$2|$3").split("|").filter(Boolean),o=parseFloat(r[0]),a=J/V*e.ratio,s="top: ".concat(o-a,"%; ").concat(r[1]?r[1]:"").concat(r[2]?r[2]:""," ");n.dataset[t.name]=s,"4600"===t.name&&"pros"===e.section&&(n.dataset[t.name]="top: ".concat(-88.5,"%; ").concat(r[1]?r[1]:""," ").concat(r[2]?r[2]:""))}})}),r&&skrollr.get().refresh()}};